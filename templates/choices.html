<!DOCTYPE html>
<html>
    <head>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
                integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
        <style>
            img.imageCenter{
                display:block;
                margin-left: auto;
                margin-right:auto;
                margin-top: 3%;
                height: 30%;
                width:30%;
            }
            #headS{
                color: mediumseagreen;
                text-align: center;
                font-family: "Copperplate";
                margin-top: 5%;
                font-size: 300%;
            }
        </style>
        <title>Filter Page</title>
    </head>
    <body>
    <h1 id="headS"><b>How does DISH make you feel...?</b></h1>
        <div class="text-center">


            {% set counter = [0] %}
            {% for key, value in restauraunts.items() %}
            {% for images in value %}
                <img src="{{images}}" id="{{counter[0]}}" style='display:none'  class = imageCenter>
                {% if counter.append(counter.pop() + 1) %} {% endif %}
            {% endfor %}
            {% endfor %}

            total time through = {{counter[0]}}
            <video id="video" width="300" height="300" autoplay></video>
            <button id="snap">Snap Photo</button>
            <!--<button id = "btnSave" onclick = "savePhoto()"> Save Photo</button>-->
            <canvas id="canvas" width="300" height="300"></canvas>

        </div>

    </body>
    <script>

        // Grab elements, create settings, etc.
        var video = document.getElementById('video');

        // Get access to the camera!
        if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            // Not adding `{ audio: true }` since we only want video now
            navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
                video.src = window.URL.createObjectURL(stream);
                video.play();
            });
        }
        // Elements for taking the snapshot
        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');
        var video = document.getElementById('video');



        imgcounter = 1
        counter = 0
            function showImage(){
                if (imgcounter > 10){
                    clearInterval(intervalTime);
                }
                if(counter % 2 == 0){
                    //display image
                    var image = document.getElementById(String(imgcounter));
                    var turnoff = document.getElementById(String(imgcounter - 1));
                    image.style.display = 'block';
                    turnoff.style.display = 'none';
                }
                else{
                    //take picture
                    var image = new Image();
                    canvas = context.drawImage(video, 0, 0, 640, 480);
                    image.src = canvas.toDataURL("image/png");

                }

                counter ++;
                imgcounter ++;
                console.log(counter)

            }
            var intervalTime = setInterval(showImage,1500)

    </script>
</html>
